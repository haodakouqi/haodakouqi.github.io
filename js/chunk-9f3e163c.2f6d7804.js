(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f3e163c"],{"3d27":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"system-menu"},[n("div",{staticClass:"button-group"},[n("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")])],1),n("div",{staticStyle:{"margin-bottom":"10px"}},[n("span",{staticStyle:{"font-size":"14px","font-weight":"normal"}},[e._v("所属系统：")]),n("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择系统",size:"small"},on:{change:e.selectSystem},model:{value:e.currentSystem,callback:function(t){e.currentSystem=t},expression:"currentSystem"}},e._l(e.systemOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),n("tree-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{columns:e.columns,"data-source":e.menuDataList,"tree-handel":e.treeHandel,"expand-place":1},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[n("el-button",{attrs:{type:"text",size:"mini"}},[e._v("\n          操作\n          "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑")])],1),n("el-dropdown-item",[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(n){return e.handleAdd(t.row)}}},[e._v("添加下级")])],1),n("el-dropdown-item",{attrs:{divided:""}},[n("el-button",{staticClass:"btn-text-red",attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])],1)],1)],1)]}}])}),n("el-dialog",{attrs:{title:e.handleTitle,visible:e.handleVisible,width:"30%",center:""},on:{"update:visible":function(t){e.handleVisible=t}}},[n("el-form",{ref:"sysMenuForm",attrs:{rules:e.rules,model:e.sysMenuForm,"status-icon":"","label-width":"90px",size:"small"}},[n("el-form-item",{attrs:{label:"上级菜单"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text",disabled:""},model:{value:e.sysMenuForm.parent_name,callback:function(t){e.$set(e.sysMenuForm,"parent_name",t)},expression:"sysMenuForm.parent_name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-radio-group",{model:{value:e.sysMenuForm.type,callback:function(t){e.$set(e.sysMenuForm,"type",t)},expression:"sysMenuForm.type"}},[n("el-radio",{attrs:{label:0}},[e._v("目录")]),n("el-radio",{attrs:{label:1}},[e._v("菜单")])],1)],1)],1)],1),2===e.sysMenuForm.type?n("el-form-item",{attrs:{label:"按钮名称"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.name,callback:function(t){e.$set(e.sysMenuForm,"name","string"===typeof t?t.trim():t)},expression:"sysMenuForm.name"}})],1)],1)],1):e._e(),2===e.sysMenuForm.type?n("el-form-item",{attrs:{label:"按钮ID"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.buttonId,callback:function(t){e.$set(e.sysMenuForm,"buttonId","string"===typeof t?t.trim():t)},expression:"sysMenuForm.buttonId"}})],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.name,callback:function(t){e.$set(e.sysMenuForm,"name","string"===typeof t?t.trim():t)},expression:"sysMenuForm.name"}})],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"组件名称"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.componentName,callback:function(t){e.$set(e.sysMenuForm,"componentName","string"===typeof t?t.trim():t)},expression:"sysMenuForm.componentName"}})],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"组件文件名"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.fileName,callback:function(t){e.$set(e.sysMenuForm,"fileName","string"===typeof t?t.trim():t)},expression:"sysMenuForm.fileName"}}),n("p",{staticClass:"tips-line"},[e._v("组件的文件名，创建目录时填空即可")])],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"所在目录名"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.directory,callback:function(t){e.$set(e.sysMenuForm,"directory","string"===typeof t?t.trim():t)},expression:"sysMenuForm.directory"}})],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.url,callback:function(t){e.$set(e.sysMenuForm,"url","string"===typeof t?t.trim():t)},expression:"sysMenuForm.url"}})],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"权限标识"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{directives:[{name:"filter-xss",rawName:"v-filter-xss"}],attrs:{type:"text"},model:{value:e.sysMenuForm.perms,callback:function(t){e.$set(e.sysMenuForm,"perms","string"===typeof t?t.trim():t)},expression:"sysMenuForm.perms"}})],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"排序号"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"number"},model:{value:e.sysMenuForm.order_num,callback:function(t){e.$set(e.sysMenuForm,"order_num","string"===typeof t?t.trim():t)},expression:"sysMenuForm.order_num"}})],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"是否显示"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-switch",{model:{value:e.sysMenuForm.visible,callback:function(t){e.$set(e.sysMenuForm,"visible",t)},expression:"sysMenuForm.visible"}}),n("p",{staticClass:"tips-line"},[e._v("此开关用来，创建详情页时控制其是否在左树显示，关闭开关则不显示")])],1)],1)],1):e._e(),2!==e.sysMenuForm.type?n("el-form-item",{attrs:{label:"图标"}},[n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:18}},[n("el-input",{attrs:{type:"text",placeholder:"例如：fa fa-circle-o"},model:{value:e.iconName,callback:function(t){e.iconName="string"===typeof t?t.trim():t},expression:"iconName"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.handleIconSelect}},[e._v("选择图标")])],1)],1)],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")]),n("el-button",{attrs:{size:"small"},on:{click:e.handleCancel}},[e._v("取 消")])],1)],1),n("icon-select")],1)},s=[],a=(n("5ab2"),n("6d57"),n("e10e"),n("63ff"),n("57f0")),i=n("289c"),l=n("5880");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={data:function(){return{iconVisible:!1,loading:!1,delVisible:!1,handleTitle:"",handleVisible:!1,iconName:"",columns:[{text:"",dataIndex:"",width:20},{text:"名称",dataIndex:"text"},{text:"图标",dataIndex:"icon",type:"icon",align:"center",width:80},{text:"类型",dataIndex:"type",type:"type"}],treeHandel:{text:"菜单操作",width:160},sysMenuForm:{parent_id:"",parent_name:"",name:"",url:"",perms:"",type:"",order_num:"",icon:"",visible:!0},rules:{type:[{required:!0,message:"请选择类型",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入链接地址",trigger:"blur"}]},currentSystem:"",systemOptions:[]}},computed:u({},Object(l["mapState"])({menuDataList:function(e){return e.authority.menuDataList}})),mounted:function(){},methods:u({},Object(l["mapActions"])("authority",["getMenuList","addSysMenu","editSysMenu","removeMenu","sysMenuById"]),{},Object(l["mapActions"])(["getNavTree"]),{getData:function(){var e=this;e.getMenuList(e)},resetForm:function(){this.sysMenuForm={parent_id:0,parent_name:"根目录",name:"",url:"",perms:"",type:"",order_num:"",icon:"",visible:!0}},handleAdd:function(e){this.resetForm(),this.handleTitle="添加菜单",this.iconName="",this.handleVisible=!0,e&&(this.sysMenuForm.parent_name=e.text,this.sysMenuForm.parent_id=e.id),this.$refs["sysMenuForm"].clearValidate()},handleEdit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,n.handleTitle="修改菜单",n.handleVisible=!0,r="",!t.hasParent){e.next=11;break}return n.sysMenuForm.sysMenuId=t.parentId,e.next=8,n.sysMenuById(n);case 8:r=e.sent,e.next=12;break;case 11:r="根目录";case 12:n.sysMenuForm={menu_id:t.attributes.id,parent_id:t.parentId,parent_name:r,name:t.attributes.text,url:t.attributes.url,perms:t.attributes.perms,type:t.attributes.type,order_num:t.attributes.order_num,icon:t.attributes.icon,fileName:t.attributes.fileName,directory:t.attributes.directory,componentName:t.attributes.componentName,buttonId:t.attributes.buttonId,visible:t.attributes.visible},n.iconName=t.attributes.icon,n.$refs["sysMenuForm"].clearValidate();case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.iconName="",this.handleVisible=!1},handleDelete:function(e){var t=this;this.sysMenuForm.menu_id=e.attributes.id,this.$confirm("删除不可恢复，是否确定删除?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){t.removeMenu(t),t.delVisible=!1})).catch((function(){t.$message.info("取消删除")}))},handleIconSelect:function(){this.iconVisible=!0},handleConfirm:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,t.$refs["sysMenuForm"].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}if("添加菜单"!==t.handleTitle){e.next=4;break}return e.next=4,t.addSysMenu(t);case 4:if("修改菜单"!==t.handleTitle){e.next=7;break}return e.next=7,t.editSysMenu(t);case 7:n.handleCancel();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectSystem:function(e){this.currentSystem=e,this.getData()}})},m=c,p=(n("701f"),n("5511")),d=Object(p["a"])(m,r,s,!1,null,null,null);t["default"]=d.exports},"701f":function(e,t,n){"use strict";var r=n("e36e"),s=n.n(r);s.a},e36e:function(e,t,n){}}]);