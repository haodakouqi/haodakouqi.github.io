(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df1dcb2a"],{"4c39f":function(t,e,i){"use strict";var s=i("fb5f"),a=i.n(s);a.a},a423:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"bullet",staticClass:"bullet"},[i("canvas",{ref:"hiddenCanvas",staticStyle:{display:"none"},attrs:{width:"0",height:"0"}}),i("div",{staticClass:"barrage-area",style:{widht:t.cWidth+"px",height:t.cHeight+"px"}},[i("canvas",{ref:"canvas",style:{width:t.cWidth+"px",height:t.cHeight-36+"px",border:"1px solid #eee"},attrs:{id:"canvas",width:t.cWidth,height:t.cHeight}})]),i("div",{staticClass:"bottom"},[i("el-switch",{model:{value:t.dmStatus,callback:function(e){t.dmStatus=e},expression:"dmStatus"}}),i("div",{staticClass:"color-setting"},[i("span",{staticClass:"placeholder"},[t._v("#")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],attrs:{type:"text",placeholder:"设置颜色"},domProps:{value:t.color},on:{input:function(e){e.target.composing||(t.color=e.target.value)}}}),i("span",{staticClass:"color",style:{background:"#"+t.color}})]),i("div",{staticClass:"input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.dmInput,expression:"dmInput"}],attrs:{type:"text",maxlength:"20"},domProps:{value:t.dmInput},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sent(e)},input:function(e){e.target.composing||(t.dmInput=e.target.value)}}}),i("button",{attrs:{type:"button"},on:{click:t.sent}},[t._v("发射")])])],1)])},a=[],n=(i("2b45"),{name:"bullet",data:function(){return{book:"master",dmArr:[],dmInput:"",color:"",dmStatus:!0,cWidth:0,cHeight:0,timer:null,canvas:null,speed:8,gap:80}},computed:{},watch:{dmStatus:function(t){t?this.start():this.stop()}},methods:{start:function(){var t=this;this.timer=setInterval((function(){t.ctx.clearRect(0,0,t.cWidth,t.cHeight),t.ctx.save(),t.ctx.font="30px Microsoft YaHei",t.dmArr.length||t.stop();for(var e=0,i=t.dmArr.length;e<i;e++){var s=t.dmArr[e],a=s.text&&-t.ctx.measureText(s.text).width;s.x-=s.speed,s.x<a?t.dmArr.splice(e,1):(t.ctx.fillStyle="#".concat(s.color),t.ctx.fillText(s.text,s.x,s.y))}t.ctx.restore()}),20)},getY:function(){var t=Math.floor(this.cHeight/this.gap);return Math.floor(Math.random()*t+1)*this.gap},getSpeed:function(){return this.speed},getColor:function(){return"".concat(Math.floor(16777215*Math.random()).toString(16))},pushDm:function(t,e){for(var i=this.getY(),s=this.cWidth,a=0,n=0,r=this.dmArr.length;n<r;n++){var o=this.dmArr[n];i===o.y&&(a+=Math.floor(4*this.$refs.hiddenCanvas.getContext("2d").measureText(o.text).width+50))}this.dmArr.push({text:t,x:s+a,y:i,speed:this.getSpeed(),color:e||this.getColor()})},sent:function(){this.dmInput&&(this.stop(),this.pushDm(this.dmInput,this.color),this.start(),this.dmInput="")},stop:function(){clearInterval(this.timer),this.ctx.clearRect(0,0,this.cWidth,this.cHeight)},initData:function(){for(var t=0;t<30;t++)this.pushDm("It's barrage ".concat(t))}},destroyed:function(){this.stop()},mounted:function(){this.cWidth=this.$refs.bullet.clientWidth*window.devicePixelRatio,this.cHeight=(this.$refs.bullet.clientWidth-100)*window.devicePixelRatio/2,this.ctx=this.$refs.canvas.getContext("2d"),this.initData(),this.start()}}),r=n,o=(i("4c39f"),i("5511")),c=Object(o["a"])(r,s,a,!1,null,"766e6c30",null);e["default"]=c.exports},fb5f:function(t,e,i){}}]);