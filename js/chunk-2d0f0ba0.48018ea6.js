(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0ba0"],{"9e31":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"part-manage"},[n("div",{staticClass:"button-group"},[n("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")])],1),n("tree-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{columns:e.columns,"data-source":e.deptDataList,"tree-handel":e.treeHandel,"expand-place":1},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[n("el-button",{attrs:{type:"text",size:"mini"}},[e._v("\n          操作\n          "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑")])],1),n("el-dropdown-item",[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(n){return e.handleAdd(t.row)}}},[e._v("添加下级")])],1),n("el-dropdown-item",{attrs:{divided:""}},[n("el-button",{staticClass:"btn-text-red",attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])],1)],1)],1)]}}])}),n("el-dialog",{attrs:{title:e.handleTitle,visible:e.handleVisible,width:"30%",center:""},on:{"update:visible":function(t){e.handleVisible=t}}},[n("el-form",{ref:"deptForm",attrs:{rules:e.rules,model:e.deptForm,"status-icon":"","label-width":"90px",size:"small"}},[n("el-form-item",{attrs:{label:"上级部门"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text",disabled:""},model:{value:e.deptForm.parent_name,callback:function(t){e.$set(e.deptForm,"parent_name",t)},expression:"deptForm.parent_name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text"},model:{value:e.deptForm.name,callback:function(t){e.$set(e.deptForm,"name","string"===typeof t?t.trim():t)},expression:"deptForm.name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"状态"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-radio",{attrs:{label:"0"},model:{value:e.deptForm.del_flag,callback:function(t){e.$set(e.deptForm,"del_flag","string"===typeof t?t.trim():t)},expression:"deptForm.del_flag"}},[e._v("正常")]),n("el-radio",{attrs:{label:"1"},model:{value:e.deptForm.del_flag,callback:function(t){e.$set(e.deptForm,"del_flag","string"===typeof t?t.trim():t)},expression:"deptForm.del_flag"}},[e._v("禁用")])],1)],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary",loading:e.tableLoading},on:{click:e.handleConfirm}},[e._v("确 定")]),n("el-button",{attrs:{size:"small",disabled:e.tableLoading},on:{click:function(t){e.handleVisible=!1}}},[e._v("取 消")])],1)],1)],1)},a=[],i=(n("5ab2"),n("6d57"),n("e10e"),n("2b45"),n("63ff"),n("34fe")),l=n("4ca4"),o=n("08c1");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={data:function(){return{tableLoading:!0,handleTitle:"",handleVisible:!1,delVisible:!1,columns:[{text:"",dataIndex:"",width:20},{text:"部门名称",dataIndex:"text"},{text:"状态",dataIndex:"del_flag",type:"status"}],treeHandel:{text:"系统操作",width:160},deptForm:{parent_name:"",parent_id:"",name:"",order_num:"",del_flag:"0"},rules:{name:{required:!0,message:"请输入部门名称",trigger:"blur"}}}},computed:d({},Object(o["e"])({deptDataList:function(e){return e.authority.deptDataList}})),mounted:function(){},methods:d({},Object(o["b"])("authority",["getDeptList","addNewDept","editDept","removeDept","deptListById"]),{getData:function(){var e=this;e.getDeptList(e)},resetForm:function(){this.deptForm={parent_name:"总部门",parent_id:0,name:"",order_num:"",del_flag:"0"}},handleAdd:function(e){this.resetForm(),this.handleTitle="添加新部门",this.handleVisible=!0,e&&(this.deptForm.parent_name=e.text,this.deptForm.parent_id=e.id),this.$refs["deptForm"].clearValidate()},handleEdit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,n.handleTitle="修改部门",n.handleVisible=!0,r="",!t.hasParent){e.next=11;break}return n.deptForm.deptById=t.parentId,e.next=8,n.deptListById(n);case 8:r=e.sent,e.next=12;break;case 11:r="无";case 12:n.deptForm={dept_id:t.attributes.id,parent_name:r,parent_id:t.parentId,name:t.attributes.text,order_num:t.attributes.order_num,del_flag:t.attributes.del_flag.toString()},n.$refs["deptForm"].clearValidate();case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this;this.deptForm.dept_id=e.attributes.id,this.$confirm("删除不可恢复，是否确定删除?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){t.removeDept(t),t.delVisible=!1})).catch((function(){t.$message.info("取消删除")}))},handleConfirm:function(){var e=this;e.$refs["deptForm"].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=8;break}if("添加新部门"!==e.handleTitle){t.next=4;break}return t.next=4,e.addNewDept(e);case 4:if("修改部门"!==e.handleTitle){t.next=7;break}return t.next=7,e.editDept(e);case 7:e.handleVisible=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})},p=c,u=n("5511"),m=Object(u["a"])(p,r,a,!1,null,null,null);t["default"]=m.exports}}]);