(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20f88cbe"],{"3f37":function(t){t.exports=JSON.parse('{"navObject":{"sonic":"分布式调度平台","mars":"序列服务","libra":"数据中间件","virgo":"分布式事务中间件","alarm":"告警中心","config":"配置中心","deploy":"部署中心","governance":"服务治理","monitor":"监控中心","auth":"认证中心"},"logoObject":{"sonic":"sonic.png","mars":"mars.png","libra":"libra.png","virgo":"virgo.png","oms":"oms.png"}}')},7482:function(t,e,i){"use strict";var r=i("cb67"),n=i.n(r);n.a},cb67:function(t,e,i){},f152:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"project"},[i("div",{staticClass:"button-group"},[i("span",{staticClass:"route-name"},[t._v(t._s(t.$route.meta.title))]),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.handleAdd("add")}}},[t._v("添加")])],1),i("div",{staticClass:"projectTable"},[i("el-table",{attrs:{data:t.projectList,size:"mini",stripe:""}},[i("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":"",width:"150",align:"center",formatter:t.nameTranslate}}),i("el-table-column",{attrs:{prop:"url",label:"地址",width:"180","show-overflow-tooltip":"",align:"center"}}),i("el-table-column",{attrs:{prop:"admins",label:"管理员","show-overflow-tooltip":"",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n            "+t._s(i.admins.join(", "))+"\n          ")]}}])}),i("el-table-column",{attrs:{prop:"icon",label:"图标","show-overflow-tooltip":"",width:"130",align:"center"}}),i("el-table-column",{attrs:{prop:"desc",label:"备注","min-width":"150",align:"center"}}),i("el-table-column",{attrs:{width:"120",align:"center",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-dropdown",{attrs:{trigger:"click"}},[i("el-button",{attrs:{type:"text",size:"mini"}},[t._v("\n                操作"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(i){return t.handleAdd("edit",e.row)}}},[t._v("编辑")])],1),i("el-dropdown-item",{attrs:{divided:""}},[i("el-button",{staticClass:"btn-text-red",attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e.row)}}},[t._v("删除")])],1)],1)],1)]}}])})],1),i("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:t.listTitle,visible:t.listVisible,width:"30%",center:""},on:{"update:visible":function(e){t.listVisible=e}}},[i("el-form",{ref:"listForm",attrs:{model:t.listForm,rules:t.inputRules,"status-icon":"","label-width":"90px",size:"small"}},[i("el-form-item",{attrs:{label:"名称：",prop:"name"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择名称"},model:{value:t.listForm.name,callback:function(e){t.$set(t.listForm,"name",e)},expression:"listForm.name"}},t._l(t.nameOptions,(function(t,e,r){return i("el-option",{key:r,attrs:{label:e+"("+t+")",value:e}})})),1)],1)],1)],1),i("el-form-item",{attrs:{label:"地址：",prop:"url"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-input",{attrs:{type:"text"},model:{value:t.listForm.url,callback:function(e){t.$set(t.listForm,"url",e)},expression:"listForm.url"}})],1)],1)],1),i("el-form-item",{attrs:{label:"管理员：",prop:"admins"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:"",placeholder:"请选择管理员"},model:{value:t.listForm.admins,callback:function(e){t.$set(t.listForm,"admins",e)},expression:"listForm.admins"}},t._l(t.userDataList,(function(t){return i("el-option",{key:t.username,attrs:{label:t.username,value:t.username}})})),1)],1)],1)],1),i("el-form-item",{attrs:{label:"Logo：",prop:"icon"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择Logo"},model:{value:t.listForm.icon,callback:function(e){t.$set(t.listForm,"icon",e)},expression:"listForm.icon"}},t._l(t.logoOptions,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1)],1),i("el-form-item",{attrs:{label:"排序：",prop:"orderNum"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-input",{attrs:{type:"text"},model:{value:t.listForm.orderNum,callback:function(e){t.$set(t.listForm,"orderNum",e)},expression:"listForm.orderNum"}})],1)],1)],1),i("el-form-item",{attrs:{label:"描述：",prop:"desc"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.listForm.desc,callback:function(e){t.$set(t.listForm,"desc",e)},expression:"listForm.desc"}})],1)],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.handleConfirm}},[t._v("确 定")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.listVisible=!1}}},[t._v("取 消")])],1)],1)],1)},n=[],s=(i("5ab2"),i("6d57"),i("e10e"),i("cc57"),i("4ca4")),a=i("365c"),o=i("08c1"),l=i("3f37");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={data:function(){return{tableHight:0,listForm:{name:"",logo:""},listVisible:!1,listTitle:"",currentPage:1,totalNum:10,pageSize:10,inputRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入地址",trigger:"blur"},{pattern:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/,message:"格式不正确"}],admins:[{type:"array",required:!0,message:"请选择租户管理员",trigger:"change"}],icon:[{required:!0,message:"请选择Logo",trigger:"change"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}]},nameOptions:l.navObject,projectList:[],logoOptions:l.logoObject,oldObject:{}}},computed:u({},Object(o["e"])({userDataList:function(t){return t.authority.userDataList}})),created:function(){delete this.nameOptions["auth"],this.oldObject=Object.assign({},this.nameOptions),this.tableHight=document.documentElement.clientHeight-200+"px",this.getData(),this.getUserList(this)},methods:u({},Object(o["b"])("authority",["getUserList"]),{getProjectList:function(){var t=this,e={page:t.currentPage,per_page:t.pageSize};t.$axios({method:"get",url:"/oms/uaa/sso/getAll",params:e}).then((function(e){Array.isArray(e.data)?(t.projectList=e.data,t.currentPage=e.currentPage,t.totalNum=e.totalCount):t.projectList=[]})).catch((function(t){return t}))},handleAdd:function(t,e){var i=this;this.nameOptions=Object.assign({},this.oldObject);var r=this.projectList.map((function(t){return t.name}));for(var n in this.nameOptions)r.indexOf(n)>-1&&delete this.nameOptions[n];"edit"===t?(this.listTitle="编辑导航",this.listForm=u({},e)):(this.listTitle="添加导航",this.listForm={admins:[]}),this.listVisible=!0,this.$nextTick((function(){i.$refs.listForm.clearValidate()}))},handleConfirm:function(){var t=this,e=this;e.$refs.listForm.validate((function(i){if(i){var r=Object.assign({},e.listForm);"添加导航"===e.listTitle?Object(a["b"])(r).then((function(){t.$message({type:"success",message:"添加成功!"}),e.projectList=[],e.getProjectList(),e.listVisible=!1})):Object(a["e"])(r).then((function(){t.$message({type:"success",message:"编辑成功!"}),e.getProjectList(),e.listVisible=!1}))}}))},handleDelete:function(t){var e=this,i=this;i.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["c"])(t.id).then((function(){e.$message({type:"success",message:"删除成功!"}),e.getProjectList()})).catch((function(t){e.$message({type:"error",message:t.data.message})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getData:function(){this.getProjectList()},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},nameTranslate:function(t){return"".concat(t.name,"(").concat(this.oldObject[t.name],")")}})},p=m,d=(i("7482"),i("5511")),g=Object(d["a"])(p,r,n,!1,null,"9819ee68",null);e["default"]=g.exports}}]);